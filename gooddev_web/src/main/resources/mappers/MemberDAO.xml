<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.good.gooddev_web.member.dao.MemberDAO">

<!-- 모든 회원정보 조회 (활성화된 회원)  -->
<select id="getList" resultType="io.good.gooddev_web.member.vo.MemberVO">
    SELECT *
    FROM good_member
    WHERE deleteYn = 'N'
    ORDER BY mid
</select>

<!-- 회원 상세조회 (활성화된 회원) -->
<select id="getReadMember_Optional" resultType="io.good.gooddev_web.member.vo.MemberVO">
    SELECT *
    FROM good_member
    WHERE mid = #{mid} AND deleteYn = 'N'
</select>

<!-- 회원탈퇴 -->
<delete id="removeMember">
    UPDATE good_member
    SET deleteYn = 'Y'
    WHERE mid = #{uid}
</delete>

<!-- 회원정보 수정 -->
<update id="modifyMember">
    UPDATE good_member
    SET password = #{password},
        memberName = #{memberName},
        nickname = #{nickname},
        phone = #{phone},
        email = #{email}
    WHERE mid = #{mid}
</update>

<!-- 회원가입 -->
<insert id="registerMember">
    INSERT INTO good_member (mid, password, memberName, nickname, phone, email, deleteYn)
    VALUES (#{mid}, #{password}, #{memberName}, #{nickname}, #{phone}, #{email}, 'N')
</insert>

<!-- 전체 회원 수 조회 -->
<select id="getTotalCount" resultType="int">
    SELECT COUNT(*)
    FROM good_member
    WHERE deleteYn = 'N'
</select>

<!-- UUID 수정 -->
<update id="modify_Uuid">
    UPDATE good_member
    SET auto_Login = #{auto_Login}
    WHERE mid = #{mid}
</update>


<!-- 로그인 처리 -->
<select id="getLogin" resultType="io.good.gooddev_web.member.dto.MemberDTO">
    SELECT *
    FROM good_member
    WHERE mid = #{mid} AND password = #{password} AND deleteYn = 'N'
</select>

<!-- UUID 수정 처리 -->
<update id="modify_uuid">
    UPDATE good_member
    SET auto_Login = #{auto_Login}
    WHERE mid = #{mid}
</update>
</mapper>